<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±è¯­æƒ…æ™¯å¯¹è¯æ‹–æ‹½ç»ƒä¹ </title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }

        .game-container {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 600px;
        }

        h2 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }

        .dialogue-box {
            margin-bottom: 30px;
            font-size: 18px;
            line-height: 2.5; /* å¢åŠ è¡Œé«˜ä»¥é€‚åº”æ‹–æ”¾ */
        }

        .line {
            margin-bottom: 10px;
        }

        .role {
            font-weight: bold;
            margin-right: 5px;
            color: #2c3e50;
        }

        /* æ”¾ç½®åŒºåŸŸæ ·å¼ */
        .drop-zone {
            display: inline-block;
            width: 220px;
            height: 35px;
            border-bottom: 2px dashed #aaa;
            vertical-align: middle;
            margin: 0 5px;
            background-color: #fafafa;
            transition: all 0.3s ease;
            position: relative;
            text-align: center;
            line-height: 35px; /* å‚ç›´å±…ä¸­ */
        }

        .drop-zone.drag-over {
            background-color: #e1f5fe;
            border-bottom: 2px solid #2196f3;
        }

        /* é€‰é¡¹åŒºåŸŸæ ·å¼ */
        .options-area {
            display: flex;
            justify-content: center;
            gap: 15px;
            padding: 20px;
            background-color: #eef2f5;
            border-radius: 10px;
            min-height: 60px;
            flex-wrap: wrap;
        }

        /* å¯æ‹–åŠ¨å…ƒç´ æ ·å¼ */
        .draggable {
            background-color: #fff;
            border: 1px solid #ccc;
            padding: 5px 15px;
            border-radius: 20px;
            cursor: grab;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-size: 16px;
            user-select: none;
            transition: transform 0.2s;
            display: inline-block;
        }

        .draggable:active {
            cursor: grabbing;
            transform: scale(1.05);
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn-container {
            text-align: center;
            margin-top: 20px;
        }

        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 0 10px;
        }

        button:hover {
            background-color: #45a049;
        }

        button.reset {
            background-color: #ff9800;
        }
        button.reset:hover {
            background-color: #e68a00;
        }

        /* åé¦ˆæ ·å¼ */
        .result-message {
            text-align: center;
            margin-top: 15px;
            font-weight: bold;
            height: 24px;
        }

        .correct {
            border-bottom: 2px solid #4CAF50 !important;
            background-color: #e8f5e9 !important;
            color: #2e7d32;
        }

        .wrong {
            border-bottom: 2px solid #f44336 !important;
            background-color: #ffebee !important;
            color: #c62828;
        }

        /* éšè—åŸå§‹ä½ç½®çš„å ä½ï¼Œå¦‚æœæ˜¯ç§»åŠ¨æ¨¡å¼ */
        .hidden {
            display: none;
        }

    </style>
</head>
<body>

<div class="game-container">
    <h2>æƒ…æ™¯å¯¹è¯å¡«ç©º</h2>
    <p style="text-align:center; color:#666; font-size:14px;">è¯·å°†ä¸‹æ–¹çš„é€‰é¡¹æ‹–æ‹½åˆ°å¯¹è¯ä¸­çš„æ¨ªçº¿ä¸Šã€‚</p>

    <div class="dialogue-box">
        <!-- 
            æ­£ç¡®é€»è¾‘ï¼š
            ç©º1 (è±†èŠ±) å¯¹åº” é€‰é¡¹2 (What's wrong with you?)
            ç©º2 (ç‹—è›‹) å¯¹åº” é€‰é¡¹1 (What should I do?)
        -->
        <div class="line">
            <span class="role">è±†èŠ±ï¼š</span>
            <span class="drop-zone" id="zone1" data-correct="opt2"></span>
        </div>
        <div class="line">
            <span class="role">ç‹—è›‹ï¼š</span>
            I have a toothache.
        </div>
        <div class="line">
            <span class="role">ç‹—è›‹ï¼š</span>
            <span class="drop-zone" id="zone2" data-correct="opt1"></span>
        </div>
        <div class="line">
            <span class="role">åŒ»ç”Ÿï¼š</span>
            You should brush your teeth before bedtime.
        </div>
    </div>

    <!-- é€‰é¡¹åŒºåŸŸ -->
    <div class="options-area" id="options-container" ondrop="drop(event)" ondragover="allowDrop(event)">
        <!-- é€‰é¡¹1 -->
        <div class="draggable" draggable="true" ondragstart="drag(event)" id="opt1">
            What should I do?
        </div>
        <!-- é€‰é¡¹2 -->
        <div class="draggable" draggable="true" ondragstart="drag(event)" id="opt2">
            What's wrong with you?
        </div>
    </div>

    <div class="result-message" id="result-msg"></div>

    <div class="btn-container">
        <button onclick="checkAnswers()">æäº¤ç­”æ¡ˆ</button>
        <button class="reset" onclick="resetGame()">é‡ç½®</button>
    </div>
</div>

<script>
    // å…è®¸æ‹–æ”¾
    function allowDrop(ev) {
        ev.preventDefault();
        // æ·»åŠ è§†è§‰æç¤º
        if (ev.target.classList.contains('drop-zone')) {
            ev.target.classList.add('drag-over');
        }
    }

    // æ‹–æ‹½å¼€å§‹
    function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
        // ç§»é™¤å¯èƒ½å­˜åœ¨çš„ç¦»å¼€æ•ˆæœ
        document.querySelectorAll('.drop-zone').forEach(el => el.classList.remove('drag-over'));
    }

    // ç¦»å¼€æ‹–æ”¾åŒºæ—¶ç§»é™¤è§†è§‰æ•ˆæœ
    document.addEventListener('dragleave', function(ev) {
        if (ev.target.classList.contains('drop-zone')) {
            ev.target.classList.remove('drag-over');
        }
    });

    // æ”¾ç½®æ“ä½œ
    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        var draggedElement = document.getElementById(data);
        
        // ç§»é™¤drag-overæ ·å¼
        if (ev.target.classList.contains('drop-zone')) {
            ev.target.classList.remove('drag-over');
        }

        // é€»è¾‘ï¼šåˆ¤æ–­ç›®æ ‡æ˜¯ æ”¾ç½®åŒº(drop-zone) è¿˜æ˜¯ é€‰é¡¹åŒº(options-area)
        // å¦‚æœæ˜¯æ”¾ç½®åŒº
        if (ev.target.classList.contains('drop-zone')) {
            // å¦‚æœè¯¥åŒºåŸŸå·²ç»æœ‰å…ƒç´ ï¼Œå…ˆæŠŠå®ƒç§»å›é€‰é¡¹åŒºï¼ˆæˆ–è€…äº¤æ¢ï¼Œè¿™é‡Œç®€å•å¤„ç†ä¸ºç§»å›ï¼‰
            if (ev.target.hasChildNodes()) {
                var existingChild = ev.target.firstChild;
                document.getElementById('options-container').appendChild(existingChild);
            }
            ev.target.appendChild(draggedElement);
        } 
        // å¦‚æœæ˜¯é€‰é¡¹åŒºï¼ˆå…è®¸æŠŠç­”æ¡ˆæ‹–å›å»ï¼‰
        else if (ev.target.id === 'options-container' || ev.target.parentNode.id === 'options-container') {
            document.getElementById('options-container').appendChild(draggedElement);
        }
        
        // æ¸…é™¤ä¹‹å‰çš„åé¦ˆçŠ¶æ€
        resetStyles();
    }

    // æ£€æŸ¥ç­”æ¡ˆ
    function checkAnswers() {
        var zone1 = document.getElementById('zone1');
        var zone2 = document.getElementById('zone2');
        var msg = document.getElementById('result-msg');
        
        // è·å–æ¯ä¸ªåŒºåŸŸå†…çš„å…ƒç´ ID
        var ans1 = zone1.children.length > 0 ? zone1.children[0].id : null;
        var ans2 = zone2.children.length > 0 ? zone2.children[0].id : null;

        var isAllCorrect = true;

        // æ£€æŸ¥ç¬¬ä¸€ä¸ªç©º (åº”è¯¥æ˜¯ opt2)
        if (ans1 === 'opt2') {
            zone1.classList.add('correct');
            zone1.classList.remove('wrong');
        } else {
            zone1.classList.add('wrong');
            zone1.classList.remove('correct');
            isAllCorrect = false;
        }

        // æ£€æŸ¥ç¬¬äºŒä¸ªç©º (åº”è¯¥æ˜¯ opt1)
        if (ans2 === 'opt1') {
            zone2.classList.add('correct');
            zone2.classList.remove('wrong');
        } else {
            zone2.classList.add('wrong');
            zone2.classList.remove('correct');
            isAllCorrect = false;
        }

        if (isAllCorrect) {
            msg.style.color = 'green';
            msg.innerText = "æ­å–œä½ ï¼ç­”æ¡ˆæ­£ç¡®ï¼ğŸ‰";
        } else {
            msg.style.color = 'red';
            msg.innerText = "ç­”æ¡ˆæœ‰è¯¯ï¼Œè¯·è°ƒæ•´åé‡è¯•ã€‚";
        }
    }

    // é‡ç½®æ ·å¼
    function resetStyles() {
        var zones = document.querySelectorAll('.drop-zone');
        zones.forEach(zone => {
            zone.classList.remove('correct', 'wrong', 'drag-over');
        });
        document.getElementById('result-msg').innerText = "";
    }

    // é‡ç½®æ¸¸æˆ
    function resetGame() {
        var container = document.getElementById('options-container');
        var opt1 = document.getElementById('opt1');
        var opt2 = document.getElementById('opt2');
        
        // å°†é€‰é¡¹æ”¾å›åŸå¤„
        container.appendChild(opt1);
        container.appendChild(opt2);
        
        resetStyles();
    }

    // ä¸ºæ‰€æœ‰æ”¾ç½®åŒºæ·»åŠ dropç›‘å¬ï¼ˆè¾…åŠ©ç¡®ä¿äº‹ä»¶ç»‘å®šï¼‰
    var dropZones = document.querySelectorAll('.drop-zone');
    dropZones.forEach(zone => {
        zone.addEventListener('dragover', allowDrop);
        zone.addEventListener('drop', drop);
    });
</script>

</body>
</html>
